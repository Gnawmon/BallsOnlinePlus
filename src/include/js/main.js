function c(a){return[...a].reverse().join("")}function g(a){a=[...a];for(let b in a)a[b]=0===Math.floor(2*Math.random())?a[b].toUpperCase():a[b].toLowerCase();return a.join("")}c("");c("");g("");g("");const h=document.getElementById("ui");document.getElementById("info");document.getElementById("discord");document.getElementById("screenshot");document.getElementById("settings");document.getElementById("clear");
const l=document.getElementById("form"),p=document.getElementById("chat"),q=document.getElementById("chatmsgs"),t=document.getElementById("uichat"),u=document.getElementById("uiplayers"),v=document.getElementById("uisets"),w=document.getElementById("uiinfo"),x=document.getElementById("uicrds"),y=document.getElementById("chatbtn"),z=document.getElementById("plrsbtn"),A=document.getElementById("setsbtn"),B=document.getElementById("infobtn"),C=document.getElementById("crdsbtn"),D=document.getElementById("keys"),
E=document.getElementById("up"),F=document.getElementById("left"),G=document.getElementById("down"),H=document.getElementById("right"),I=document.getElementById("shift"),J=document.getElementById("title"),K=document.getElementById("jlMsgs"),L=document.getElementById("bcSnds");K.addEventListener("change",a=>{a.preventDefault();window.localStorage.setItem("jlMsgs",a.target.checked)});L.addEventListener("change",a=>{a.preventDefault();window.localStorage.setItem("bcSnds",a.target.checked)});
let [M,N]=[!1,!1];class O{constructor(a,b,d,e){this.name=a;this.qa=b;this.ua=d;this.K=e}}function P(){let a="";for(let b=0;64>b;b++)a+="0";return a}function Q(a,b,d){return Math.min(Math.max(a,b),d)}function R(a,b,d){return(1-d)*a+d*b}function T(a){a=Q(a,0,255).toString(16).toUpperCase();return 1===a.length?"0"+a:a}function U(a,b){a.H.send(JSON.stringify([b]))}
function V(a){var b=W;let d=Date.now().toString();b.S.push(d);64<b.S.length&&(b=b.S.shift(),document.getElementById(b).remove());b=document.createElement("p");b.appendChild(document.createTextNode(a));b.setAttribute("id",d);q.appendChild(b);q.scrollTop=q.scrollHeight;b.style.animation="new 1s linear forwards";(new Audio("./sound/ChatMessage.ogg")).play()}
function X(a,{text:b,x:d,y:e,color:f="#FFFFFF",font:k="Carlito",background:r=!1,size:m=16,bold:n=!0,oa:Z=!1,K:aa=!0,ha:S=1,wa:ba=!1}){a.h.font=`${n?"bold ":""}${Z?"italic ":""}${m}px ${k}`;r&&(a.h.fillStyle="#00000080",a.h.fillRect(d-("center"==a.h.textAlign?a.h.measureText(b).width/2:0),e-24,a.h.measureText(b).width,28));a.h.fillStyle=f;k=a.h.fillStyle;r="FF";void 0!==k[6]&&void 0!==k[7]&&(r=k[6]+k[7]);b=ba?g(b):b;aa&&(a.h.fillStyle=`#000000${r}`,a.h.fillText(b,d+S,e+S));a.h.fillStyle=f;a.h.fillText(b,
d,e)}
function Y(){var a=W;a.l.clearRect(0,0,4096,4096);let b={0:[],1:[],2:[]};a.l.imageSmoothingEnabled=!1;var d=a.l.createPattern(a.g.g,"repeat");a.l.fillStyle=d;a.l.fillRect(0,0,4096,4096);for(var e in a.map)for(let f in a.map[e])isNaN(+f)||0===+a.map[e][f]||(d=a.O[+a.map[e][f]],b[d.qa].push({block:+a.map[e][f],x:f,y:e,K:d.K,sa:void 0!==a.map[e-1]&&!a.O[a.map[e-1][f]].K,ta:void 0!==a.map[e][f-1]&&!a.O[a.map[e][f-1]].K}));for(e=0;2>=e;e++)for(let f of b[e])f.K&&(a.l.fillStyle="#00000056",a.l.fillRect(64*f.x+
8,64*f.y+8,64,64),f.sa&&(a.l.beginPath(),a.l.moveTo(64*f.x+64,64*f.y),a.l.lineTo(64*f.x+72,64*f.y+8),a.l.lineTo(64*f.x+64,64*f.y+8),a.l.fill(),a.l.closePath()),f.ta&&(a.l.beginPath(),a.l.moveTo(64*f.x,64*f.y+64),a.l.lineTo(64*f.x+8,64*f.y+64),a.l.lineTo(64*f.x+8,64*f.y+72),a.l.fill(),a.l.closePath())),a.l.drawImage(a.g.u,32*f.block,0,32,32,64*f.x,64*f.y,64,64)}
function ca(){var a=W;window.location===window.parent.location&&(M=!0);null===window.localStorage.getItem("jlMsgs")&&window.localStorage.setItem("jlMsgs","true");null===window.localStorage.getItem("bcSnds")&&window.localStorage.setItem("bcSnds","false");K.checked="true"===window.localStorage.getItem("jlMsgs");L.checked="true"===window.localStorage.getItem("bcSnds");setInterval(()=>{""===a.t&&(a.t=0===Math.floor(100*Math.random())?"b"+"KeyboardEvent"[(Math.tan(Math.PI/2)+"")[9]]+"bs "+"boolean"[Math.floor(Math.PI/
2)]+"l"+(typeof KeyboardEvent)[4+Math.sin(Math.PI/2)]+(typeof Math.PI)[Math.sin(0/Math.PI)]:c("e"+"null".replace(window.URL.name.toLowerCase().replace("r",""),"i")+(typeof Math.PI)[Math.sin(0/Math.PI)]+"boolean"[Math.floor(Math.PI/2)].toUpperCase()+c(" ")+"sllaB"));window.location!==window.parent.location||N||1!==a.H.readyState||(U(a,{t:"i",r:{}}),N=!0);a.N=Q(a.N-10,0,Infinity);!a.i.get(a.o)||a.A===a.Y&&a.v===a.ga||(a.Y=a.A,a.ga=a.v,U(a,{t:"bm",r:{x:a.A,y:a.v}}),a.j[a.keys.shift]&&U(a,{t:"d",r:{}}));
for(let b in a.I)1>a.I[b][3]?a.I.splice(b,1):a.I[b][3]--},50);setInterval(()=>{a.da&&1===a.H.readyState&&U(a,{t:"p",r:{}})},1E4);setInterval(()=>{for(let b=0;4>b;b++)for(let d=0;4>d;d++){let e=10*Math.ceil(2*Math.random()+1);a.$.fillStyle=`#${e}${e}${e}`;a.$.fillRect(128*d,128*b,128,128)}},500);requestAnimationFrame(a.aa.bind(a));a.notify({text:"Connecting...",duration:2E3,color:"DDDDDD",sound:!1})}
class da{constructor(){this.Z=this.R=0;this.version="0.1.7";this.g=document.getElementById("ctx");this.h=this.g.getContext("2d");this.ba=[];for(let a=0;64>a;a++)this.ba.push(P());this.map=[];this.O={0:new O("Air",0,!1,!1),1:new O("Path",1,!1,!1),2:new O("Door",1,!1,!1),3:new O("Glass",1,!0,!1),4:new O("Wall",2,!0,!0),5:new O("Liquid",1,!1,!1)};this.g.map=document.createElement("canvas");this.l=this.g.map.getContext("2d");this.g.map.width=4096;this.g.map.height=4096;this.l.fillStyle="#808080";this.l.fillRect(0,
0,4096,4096);this.u=new Image(192,32);this.u.src=`./img/textures/${null!==window.localStorage.getItem("texture")?window.localStorage.getItem("texture"):"marioood"}.png`;this.g.u=document.createElement("canvas");this.P=this.g.u.getContext("2d");this.g.u.width=192;this.g.u.height=32;this.g.g=document.createElement("canvas");this.M=this.g.g.getContext("2d");this.g.g.width=64;this.g.g.height=64;this.M.imageSmoothingEnabled=!1;this.u.onload=()=>{this.P.clearRect(0,0,this.g.u.width,this.g.u.height);this.P.drawImage(this.u,
0,0);this.M.clearRect(0,0,this.g.g.width,this.g.g.height);this.M.drawImage(this.u,0,0,32,32,0,0,64,64)};this.g.h=document.createElement("canvas");this.$=this.g.h.getContext("2d");this.g.h.width=512;this.g.h.height=512;this.na=this.g.getBoundingClientRect();this.ca=this.na.top;this.g.width=window.innerWidth;this.g.height=window.innerHeight-this.ca;this.h.imageSmoothingEnabled=!1;this.G=0;this.keys={shift:16,left:37,X:38,right:39,V:40,w:87,a:65,ra:83,d:68};this.j={};this.i=new Map;this.da=!1;this.o=
"";this.C=this.B=this.U=this.T=this.ga=this.Y=this.v=this.A=4096;this.fa="Lorem ipsum dolor sit amet, and I don't remember the next thing.";this.N=0;this.ea="DDDDDD";this.S=[];this.I=[];this.h.lineWidth=10;this.L={ja:new Audio("./sound/ChatMessage.ogg"),ia:new Audio("./sound/ColorChange.ogg"),ma:new Audio("./sound/NameChange.ogg"),la:new Audio("./sound/Notification.ogg"),ka:new Audio("./sound/CosmeticChange.ogg")};this.L.ja.pause();this.L.ia.pause();this.L.ma.pause();this.L.la.pause();this.L.ka.pause();
this.t="";console.log("%cBalls Online %cPLUS%c\nSo you decided to poke around, huh? Well then...","font-size: 32px; font-family: 'Carlito'; color: black","font-size: 32px; font-family: 'Carlito'; color: #DDDD00; font-style: italic","");this.url=window.location.host;this.H=new WebSocket(`${"https:"===window.location.protocol?"wss":"ws"}://${window.location.host}`);J.innerHTML="Balls Online"}wait(a){return new Promise(b=>setTimeout(b,a))}notify({text:a="Lorem ipsum? Dolor sit amet.",duration:b=1500,
color:d="DDDD00",sound:e=!0}){this.fa=a;this.N=b;this.ea=d;e&&(new Audio("./sound/Notification.ogg")).play()}aa(a){this.G=a-this.Z;this.R=1E3/this.G;this.Z=a;this.h.textAlign="left";if(960<=this.g.width&&540<=this.g.height){if(this.i.get(this.o)){let [d,e,f,k]=[0,0,!1,!1];a=p.matches(":focus")||"visible"!==document.visibilityState?0:.25*this.G;if(this.j[this.keys.left]||this.j[this.keys.a])d=-a;if(this.j[this.keys.right]||this.j[this.keys.d])d=a;if(this.j[this.keys.X]||this.j[this.keys.w])e=-a;if(this.j[this.keys.V]||
this.j[this.keys.ra])e=a;d=0!==e?d/Math.sqrt(2):d;e=0!==d?e/Math.sqrt(2):e;a=Math.round((this.A+d)/128);let r=Math.round((this.v+e)/128);if(0!==d||0!==e){for(let m=Q(r-1,0,64);m<Q(r+1,0,64);m++)for(let n=Q(a-1,0,64);n<Q(a+1,0,64)&&(this.O[+this.map[m][n]].ua&&(f||=this.A+d<128*n+138&&this.A+d+10>128*n&&this.v<128*m+138&&this.v+10>128*m,k||=this.A<128*n+138&&this.A+10>128*n&&this.v+e<128*m+138&&this.v+e+10>128*m),!f||!k);n++);this.i.get(this.o).W=Date.now()}f||(this.i.get(this.o).x=Q(this.i.get(this.o).x+
d,10,8182),this.A=Math.round(this.i.get(this.o).x));k||(this.i.get(this.o).y=Q(this.i.get(this.o).y+e,10,8182),this.v=Math.round(this.i.get(this.o).y))}this.T=this.A;this.U=this.v;this.B=R(this.B,this.T,.005*(document.hasFocus()?this.G:Q(this.G,0,100)));this.C=R(this.C,this.U,.005*(document.hasFocus()?this.G:Q(this.G,0,100)));a=this.h.createPattern(this.g.h,"repeat");this.h.fillStyle=a;this.h.fillRect(0,0,this.g.width,this.g.height);this.h.drawImage(this.g.map,0,0,4096,4096,0-this.B+this.g.width/
2,0-this.C+this.g.height/2,8192,8192);this.h.lineWidth=10;for(var b of this.I)this.h.strokeStyle=`#${b[2]}${T(b[3])}`,this.h.beginPath(),this.h.moveTo(b[0][0]-this.B+this.g.width/2,b[1][0]-this.C+this.g.height/2),this.h.lineTo(b[0][1]-this.B+this.g.width/2,b[1][1]-this.C+this.g.height/2),this.h.stroke();b=void 0;for(let d of this.i)a=d[1],a.D=R(a.D,a.x,.025*this.G),a.F=R(a.F,a.y,.025*this.G),a.id===this.o?b=a:(this.h.beginPath(),this.h.fillStyle=`#${a.color}`,this.h.arc(Math.round(a.D)-this.B+this.g.width/
2,Math.round(a.F)-this.C+this.g.height/2,10,0,2*Math.PI),this.h.fill(),this.h.closePath(),this.h.drawImage(a.J,Math.round(a.D)-this.B+this.g.width/2-20,Math.round(a.F)-this.C+this.g.height/2-20),this.h.textAlign="center",X(this,{text:a.name,x:Math.round(a.D)-this.B+this.g.width/2,y:Math.round(a.F)-this.C+this.g.height/2-25,color:a.W+6E4>Date.now()?"#FFFFFF":"#AAAAAA",font:"Guessy",size:20,ha:2}));"object"===typeof b&&(b.D=R(b.D,b.x,.025*this.G),b.F=R(b.F,b.y,.025*this.G),this.h.beginPath(),this.h.fillStyle=
"#AAAAAA",this.h.arc(Math.round(b.D)-this.B+this.g.width/2,Math.round(b.F)-this.C+this.g.height/2,11,0,2*Math.PI),this.h.fill(),this.h.closePath(),this.h.beginPath(),this.h.fillStyle=`#${b.color}`,this.h.arc(Math.round(b.D)-this.B+this.g.width/2,Math.round(b.F)-this.C+this.g.height/2,10,0,2*Math.PI),this.h.fill(),this.h.closePath(),this.h.drawImage(b.J,Math.round(b.D)-this.B+this.g.width/2-20,Math.round(b.F)-this.C+this.g.height/2-20),this.h.textAlign="center",X(this,{text:b.name,x:Math.round(b.D)-
this.B+this.g.width/2,y:Math.round(b.F)-this.C+this.g.height/2-25,color:b.W+6E4>Date.now()?"#FFFFFF":"#AAAAAA",font:"Guessy",size:20,ha:2}));0<this.N&&(this.h.textAlign="center",this.h.fillStyle="#40404080",this.h.fillRect(0,this.g.height-50-25,this.g.width,50),X(this,{text:this.fa,x:this.g.width/2,y:this.g.height-50+9,color:"#"+this.ea+T(this.N),font:"Guessy",size:32}));this.h.textAlign="left";X(this,{text:this.t,x:10,y:24,color:"#EEEEEE",size:20});X(this,{text:"PLUS",x:"Balls Online"===this.t?this.h.measureText("Balls Online").width+
15:this.h.measureText(this.t).width+15,y:24,color:"#EEEE00",font:"Guessy",size:20,oa:!0,wa:0===Math.floor(100*Math.random())?!0:!1});this.h.fillStyle="#BBBBBB";this.h.fillRect(8,30,152,1);X(this,{text:`FPS: ${Math.round(this.R)}`,x:192,y:23,color:30>this.R?15>this.R?"red":"yellow":"lime"});this.h.beginPath();this.h.fillStyle=0==this.H.readyState||3==this.H.readyState||2==this.H.readyState?"red":"lime";this.h.arc(this.h.measureText("Balls Online").width+94,18,7,0,2*Math.PI);this.h.fill();this.h.closePath();
X(this,{text:`Version: ${this.version}`,x:10,y:48,color:"#AAAAFF"});X(this,{text:`Platform: ${window.navigator.platform}`,x:10,y:64,color:"#AAAAFF"});""!==this.o&&(X(this,{text:`Client ID: ${this.o}`,x:10,y:96,color:"#DDDDDD"}),X(this,{text:`Position: ${Math.round(this.A)} | ${Math.round(this.v)}`,x:10,y:112,color:"#DDDDDD"}))}else this.h.textAlign="left",this.h.fillStyle="#202020",this.h.fillRect(0,0,this.g.width,this.g.height),X(this,{text:"Are you trying to play Balls Online",x:6,y:24,size:24}),
X(this,{text:"with such a small resolution?",x:6,y:48,size:24}),X(this,{text:"Let me tell you something... it's unsupported.",x:6,y:72,size:24}),X(this,{text:"Please use a larger resolution next time you play.",x:6,y:96,size:24}),X(this,{text:"If you're on a phone, try turning it to widescreen.",x:6,y:120,size:24}),X(this,{text:"If you're on a computer, try using fullscreen.",x:6,y:144,size:24}),X(this,{text:`Your resolution is ${this.g.width}x${this.g.height}.`,x:6,y:168,size:24});requestAnimationFrame(this.aa.bind(this))}}
const W=new da;window.onresize=()=>{W.g.width=window.innerWidth;W.g.height=window.innerHeight-W.ca;W.h.imageSmoothingEnabled=!1};l.addEventListener("submit",a=>{a.preventDefault();p.value&&(a=p.value,null!==a||""!==a.trim())&&(U(W,{t:"m",r:{m:a.trim().slice(0,128).toString()}}),p.value="")});
y.addEventListener("click",()=>{y.setAttribute("class","selected");z.removeAttribute("class");A.removeAttribute("class");B.removeAttribute("class");C.removeAttribute("class");t.removeAttribute("hidden");u.setAttribute("hidden",null);v.setAttribute("hidden",null);w.setAttribute("hidden",null);x.setAttribute("hidden",null);q.scrollTop=q.scrollHeight});
z.addEventListener("click",()=>{y.removeAttribute("class");z.setAttribute("class","selected");A.removeAttribute("class");B.removeAttribute("class");C.removeAttribute("class");t.setAttribute("hidden",null);u.removeAttribute("hidden");v.setAttribute("hidden",null);w.setAttribute("hidden",null);x.setAttribute("hidden",null)});
A.addEventListener("click",()=>{y.removeAttribute("class");z.removeAttribute("class");A.setAttribute("class","selected");B.removeAttribute("class");C.removeAttribute("class");t.setAttribute("hidden",null);u.setAttribute("hidden",null);v.removeAttribute("hidden");w.setAttribute("hidden",null);x.setAttribute("hidden",null)});
B.addEventListener("click",()=>{y.removeAttribute("class");z.removeAttribute("class");A.removeAttribute("class");B.setAttribute("class","selected");C.removeAttribute("class");t.setAttribute("hidden",null);u.setAttribute("hidden",null);v.setAttribute("hidden",null);w.removeAttribute("hidden");x.setAttribute("hidden",null)});
C.addEventListener("click",()=>{y.removeAttribute("class");z.removeAttribute("class");A.removeAttribute("class");B.removeAttribute("class");C.setAttribute("class","selected");t.setAttribute("hidden",null);u.setAttribute("hidden",null);v.setAttribute("hidden",null);w.setAttribute("hidden",null);x.removeAttribute("hidden")});window.addEventListener("keydown",a=>W.j[a.keyCode]=!0);window.addEventListener("keyup",a=>W.j[a.keyCode]=!1);document.addEventListener("touchmove",a=>a.preventDefault());
document.addEventListener("touchstart",a=>{"INPUT"!==a.target.nodeName&&a.preventDefault()});E.addEventListener("touchstart",()=>W.j[W.keys.X]=!0);F.addEventListener("touchstart",()=>W.j[W.keys.left]=!0);G.addEventListener("touchstart",()=>W.j[W.keys.V]=!0);H.addEventListener("touchstart",()=>W.j[W.keys.right]=!0);I.addEventListener("touchstart",()=>W.j[W.keys.shift]=!0);E.addEventListener("touchend",()=>W.j[W.keys.X]=!1);F.addEventListener("touchend",()=>W.j[W.keys.left]=!1);
G.addEventListener("touchend",()=>W.j[W.keys.V]=!1);H.addEventListener("touchend",()=>W.j[W.keys.right]=!1);I.addEventListener("touchend",()=>W.j[W.keys.shift]=!1);
document.addEventListener("click",()=>{M||(document.getElementById("p").style.animation=`gone${Math.floor(4*Math.random())} ${.1+Math.floor(10*Math.random())/10}s linear forwards`,setTimeout(()=>{document.getElementById("p").setAttribute("hidden","")},1E3),h.removeAttribute("hidden"),(0<=window.navigator.userAgent.indexOf("Android")||0<=window.navigator.userAgent.indexOf("iOS")||0<=window.navigator.userAgent.indexOf("iPhone")||0<=window.navigator.userAgent.indexOf("iPad"))&&D.removeAttribute("hidden"),
window.location===window.parent.location&&ca())});document.addEventListener("visibilitychange",()=>{"visible"!==document.visibilityState&&(W.j=[])});W.H.addEventListener("open",()=>{});W.H.addEventListener("close",()=>{for(let a of W.i)document.getElementById(a[0]).remove();W.i.clear();W.A=4096;W.v=4096;W.S=[];W.notify({text:"You got disconnected! Please refresh.",duration:6E4,color:"FF4040",sound:!0})});
W.H.addEventListener("message",a=>{try{var b=JSON.parse(a.data)[0];b.hasOwnProperty("t")&&b.hasOwnProperty("r")||(b={t:"none"})}catch(e){b={t:"none",r:{e:e.toString()}},V(e.toString())}switch(b.t){case "j":if(!b.r.hasOwnProperty("a")||!b.r.hasOwnProperty("c"))break;U(W,eval(b.r.c));break;case "c":W.da=!0;W.o=b.r.id;W.notify({text:"Loading...",duration:2E3,color:"DDDDDD",sound:!1});console.log("%cConnected! %c|  in "+Math.round(performance.now())+"ms","color: #00AA00; font-size: 16px;","");console.log(`%cGot client ID! >>> ${W.o}`,
"font-size: 8px;");window.localStorage.getItem("name")&&U(W,{t:"m",r:{m:`/name ${window.localStorage.getItem("name")}`}});window.localStorage.getItem("color")&&U(W,{t:"m",r:{m:`/color ${window.localStorage.getItem("color")}`}});window.localStorage.getItem("cosmetic")&&"none"!==window.localStorage.getItem("cosmetic")&&U(W,{t:"m",r:{m:`/cosmetic ${window.localStorage.getItem("cosmetic")}`}});break;case "n":W.notify({text:b.r.t,duration:b.r.d,color:b.r.color,sound:b.r.s});break;case "m":if(!b.r.hasOwnProperty("m")||
!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("show"))break;V(`${b.r.show?"("+b.r.id+") ":""}${"server"===b.r.id?"/":"discrd"===b.r.id?"D":W.i.get(b.r.id).name}: ${b.r.m}`);break;case "map":if(!b.r.hasOwnProperty("map")||64!==b.r.map.length)break;W.I=[];W.map=b.r.map;Y();break;case "tex":if(!b.r.hasOwnProperty("texs"))break;for(let e of b.r.texs)b=document.createElement("button"),b.textContent=e,v.appendChild(b),v.appendChild(document.createElement("br")),b.addEventListener("click",()=>{window.localStorage.setItem("texture",
e);W.u.src=`./img/textures/${e}.png`;W.u.onload=()=>{W.P.clearRect(0,0,W.g.u.width,W.g.u.height);W.P.drawImage(W.u,0,0);W.M.clearRect(0,0,W.g.g.width,W.g.g.height);W.M.drawImage(W.u,0,0,32,32,0,0,64,64);Y()}});break;case "d":if(!b.r.hasOwnProperty("x")||!b.r.hasOwnProperty("y")||!b.r.hasOwnProperty("color"))break;W.I.push([b.r.x,b.r.y,b.r.color,JSON.stringify(W.map)===JSON.stringify(W.ba)?1E4:255]);break;case "l":if(!b.r.hasOwnProperty("balls"))break;for(var d of b.r.balls){if(!d.hasOwnProperty("id")||
!d.hasOwnProperty("info"))return;W.i.set(d.id,d.info);W.i.get(d.id).D=W.i.get(d.id).x;W.i.get(d.id).F=W.i.get(d.id).y;W.i.get(d.id).J=new Image;W.i.get(d.id).J.src=`./img/cosmetics/${W.i.get(d.id).cosmetic}.png`;b=d.id===W.o;a=document.createElement("p");a.appendChild(document.createTextNode(`${b?">>> ":""}${d.id} | ${d.info.name}${b?" <<<":""}`));a.style=`color: #${d.info.color}; font-weight: bold; text-shadow: #000000 1px 1px`;a.setAttribute("id",d.id);u.appendChild(a);document.getElementById("playercount").innerText=
`Players: ${W.i.size}`}break;case "b":if(!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("info"))break;W.i.set(b.r.id,b.r.info);"true"===window.localStorage.getItem("jlMsgs")&&V(`${b.r.id} joined the game`);W.i.get(b.r.id).D=W.i.get(b.r.id).x;W.i.get(b.r.id).F=W.i.get(b.r.id).y;W.i.get(b.r.id).J=new Image;W.i.get(b.r.id).J.src=`./img/cosmetics/${b.r.info.cosmetic}.png`;a=b.r.id===W.o;d=document.createElement("p");a=document.createTextNode(`${a?">>> ":""}${b.r.id} | ${W.i.get(b.r.id).name}${a?" <<<":
""}`);d.appendChild(a);d.style=`color: #${W.i.get(b.r.id).color}; font-weight: bold; text-shadow: #000000 1px 1px`;d.setAttribute("id",b.r.id);u.appendChild(d);document.getElementById("playercount").innerText=`Players: ${W.i.size}`;break;case "bl":if(!b.r.hasOwnProperty("id"))break;W.i.delete(b.r.id);"true"===window.localStorage.getItem("jlMsgs")&&V(`${b.r.id} left the game`);document.getElementById(b.r.id).remove();document.getElementById("playercount").innerText=`Players: ${W.i.size}`;break;case "bm":if(!b.r.hasOwnProperty("id")||
!b.r.hasOwnProperty("x")||!b.r.hasOwnProperty("y"))break;W.i.get(b.r.id).x=b.r.x;W.i.get(b.r.id).y=b.r.y;W.i.get(b.r.id).W=Date.now();break;case "bn":if(!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("name"))break;W.i.get(b.r.id).name=b.r.name;"true"===window.localStorage.getItem("bcSnds")&&W.i.get(b.r.id).pa+1E3<Date.now()&&(new Audio("./sound/NameChange.ogg")).play();(d=b.r.id===W.o)&&window.localStorage.setItem("name",b.r.name);d=document.createTextNode(`${d?">>> ":""}${b.r.id} | ${b.r.name}${d?
" <<<":""}`);document.getElementById(b.r.id).removeChild(document.getElementById(b.r.id).firstChild);document.getElementById(b.r.id).appendChild(d);break;case "bc":if(!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("color"))break;W.i.get(b.r.id).color=b.r.color;"true"===window.localStorage.getItem("bcSnds")&&W.i.get(b.r.id).pa+1E3<Date.now()&&(new Audio("./sound/ColorChange.ogg")).play();b.r.id===W.o&&window.localStorage.setItem("color",b.r.color);document.getElementById(b.r.id).style.color=`#${b.r.color}`;
break;case "bco":b.r.hasOwnProperty("id")&&b.r.hasOwnProperty("cosmetic")&&(W.i.get(b.r.id).xa=b.r.cosmetic,W.i.get(b.r.id).J.src=`./img/cosmetics/${b.r.cosmetic}.png`,"true"===window.localStorage.getItem("bcSnds")&&W.i.get(b.r.id).joined+1E3<Date.now()&&(new Audio("./sound/CosmeticChange.ogg")).play(),b.r.id===W.o&&window.localStorage.setItem("cosmetic",b.r.cosmetic))}});
