function c(a){return[...a].reverse().join("")}function f(a){a=[...a];for(let b in a)a[b]=0===Math.floor(2*Math.random())?a[b].toUpperCase():a[b].toLowerCase();return a.join("")}c("");c("");f("");f("");const g=document.getElementById("ui");document.getElementById("info");document.getElementById("discord");document.getElementById("screenshot");document.getElementById("settings");document.getElementById("clear");
const k=document.getElementById("form"),n=document.getElementById("chat"),q=document.getElementById("chatmsgs"),r=document.getElementById("uichat"),t=document.getElementById("uiplayers"),u=document.getElementById("uisets"),v=document.getElementById("uiinfo"),w=document.getElementById("uicrds"),y=document.getElementById("chatbtn"),z=document.getElementById("plrsbtn"),A=document.getElementById("setsbtn"),B=document.getElementById("infobtn"),C=document.getElementById("crdsbtn"),D=document.getElementById("keys"),
E=document.getElementById("up"),F=document.getElementById("left"),G=document.getElementById("down"),H=document.getElementById("right"),I=document.getElementById("shift"),J=document.getElementById("title"),K=document.getElementById("jlMsgs"),L=document.getElementById("bcSnds"),M=document.getElementById("tex0"),N=document.getElementById("tex1");K.addEventListener("change",a=>{a.preventDefault();window.localStorage.setItem("jlMsgs",a.target.checked)});
L.addEventListener("change",a=>{a.preventDefault();window.localStorage.setItem("bcSnds",a.target.checked)});let [O,P]=[!1,!1];class Q{constructor(a,b,d,e){this.name=a;this.ra=b;this.pa=d;this.P=e}}function R(a,b,d){return Math.min(Math.max(a,b),d)}function S(a,b,d){return(1-d)*a+d*b}function U(a){a=R(a,0,255).toString(16).toUpperCase();return 1===a.length?"0"+a:a}function V(a,b){a.H.send(JSON.stringify([b]))}
function W(a){var b=X;let d=Date.now().toString();b.O.push(d);64<b.O.length&&(b=b.O.shift(),document.getElementById(b).remove());b=document.createElement("p");b.appendChild(document.createTextNode(a));b.setAttribute("id",d);q.appendChild(b);q.scrollTop=q.scrollHeight;b.style.animation="new 1s linear forwards";(new Audio("./sound/ChatMessage.ogg")).play()}
function Y(a,{text:b,x:d,y:e,color:x="#FFFFFF",font:h="Carlito",background:p=!1,size:l=16,bold:m=!0,ma:aa=!1,P:ba=!0,fa:T=1,sa:ca=!1}){a.g.font=`${m?"bold ":""}${aa?"italic ":""}${l}px ${h}`;p&&(a.g.fillStyle="#00000080",a.g.fillRect(d-("center"==a.g.textAlign?a.g.measureText(b).width/2:0),e-24,a.g.measureText(b).width,28));a.g.fillStyle=x;h=a.g.fillStyle;p="FF";void 0!==h[6]&&void 0!==h[7]&&(p=h[6]+h[7]);b=ca?f(b):b;ba&&(a.g.fillStyle=`#000000${p}`,a.g.fillText(b,d+T,e+T));a.g.fillStyle=x;a.g.fillText(b,
d,e)}
function Z(){var a=X;a.j.fillStyle="#808080";a.j.fillRect(0,0,2048,2048);a.j.imageSmoothingEnabled=!1;a.j.fillStyle="#00000010";a.j.fillRect(0,0,2048,8);a.j.fillRect(0,8,8,2040);for(let b in a.map)for(let d in a.map[b]){a.j.globalAlpha=1;let e=a.M[+a.map[b][d]];isNaN(+d)||0===+a.map[b][d]||(e.P&&(a.j.fillStyle="#00000010",a.j.fillRect(64*d+8,64*b+8,64,64),void 0===a.map[b-1]||a.M[a.map[b-1][d]].P||(a.j.beginPath(),a.j.moveTo(64*d+64,64*b),a.j.lineTo(64*d+72,64*b+8),a.j.lineTo(64*d+64,64*b+8),a.j.fill(),
a.j.closePath()),void 0===a.map[b][d-1]||a.M[a.map[b][d-1]].P||(a.j.beginPath(),a.j.moveTo(64*d,64*b+64),a.j.lineTo(64*d+8,64*b+64),a.j.lineTo(64*d+8,64*b+72),a.j.fill(),a.j.closePath())),a.j.globalAlpha=e.ra/255,a.j.drawImage(a.h.u,32*(+a.map[b][d]-1),0,32,32,64*d,64*b,64,64))}a.j.globalAlpha=1}
function da(){var a=X;window.location===window.parent.location&&(O=!0);null===window.localStorage.getItem("jlMsgs")&&window.localStorage.setItem("jlMsgs","true");null===window.localStorage.getItem("bcSnds")&&window.localStorage.setItem("bcSnds","false");K.checked="true"===window.localStorage.getItem("jlMsgs");L.checked="true"===window.localStorage.getItem("bcSnds");setInterval(()=>{""===a.t&&(a.t=0===Math.floor(100*Math.random())?"b"+"KeyboardEvent"[(Math.tan(Math.PI/2)+"")[9]]+"bs "+"boolean"[Math.floor(Math.PI/
2)]+"l"+(typeof KeyboardEvent)[4+Math.sin(Math.PI/2)]+(typeof Math.PI)[Math.sin(0/Math.PI)]:c("e"+"null".replace(window.URL.name.toLowerCase().replace("r",""),"i")+(typeof Math.PI)[Math.sin(0/Math.PI)]+"boolean"[Math.floor(Math.PI/2)].toUpperCase()+c(" ")+"sllaB"));window.location!==window.parent.location||P||1!==a.H.readyState||(V(a,{t:"i",r:{}}),P=!0);a.L=R(a.L-10,0,Infinity);!a.i.get(a.o)||a.v===a.da&&a.A===a.ea||(a.da=a.v,a.ea=a.A,V(a,{t:"bm",r:{x:a.v,y:a.A}}),a.l[a.keys.shift]&&V(a,{t:"d",r:{}}));
for(let b in a.I)1>a.I[b][3]?a.I.splice(b,1):a.I[b][3]--},50);setInterval(()=>{a.aa&&1===a.H.readyState&&V(a,{t:"p",r:{}})},1E4);setInterval(()=>{},5E3);requestAnimationFrame(a.Y.bind(a));a.notify({text:"Connecting...",duration:2E3,color:"DDDDDD",qa:!1})}
class ea{constructor(){this.X=this.N=0;this.version="0.1.5";this.h=document.getElementById("ctx");this.g=this.h.getContext("2d");this.Z=[];for(let a=0;32>a;a++)this.Z.push("00000000000000000000000000000000");this.map=[];this.M={0:new Q("Air",255,!1,!1),1:new Q("Door",10,!1,!1),2:new Q("Glass",32,!0,!1),3:new Q("Wall",255,!0,!0),4:new Q("Liquid",154,!1,!1)};this.h.map=document.createElement("canvas");this.j=this.h.map.getContext("2d");this.h.map.width=2048;this.h.map.height=2048;this.j.fillStyle="#808080";
this.j.fillRect(0,0,2048,2048);this.u=new Image(128,32);this.u.src=`./img/textures/${null!==window.localStorage.getItem("texture")?window.localStorage.getItem("texture"):"marioood"}.png`;this.h.u=document.createElement("canvas");this.R=this.h.u.getContext("2d");this.h.u.width=128;this.h.u.height=32;this.u.onload=()=>this.R.drawImage(this.u,0,0);this.ga=this.h.getBoundingClientRect();this.$=this.ga.top;this.h.width=window.innerWidth;this.h.height=window.innerHeight-this.$;this.g.imageSmoothingEnabled=
!1;this.G=0;this.keys={shift:16,left:37,W:38,right:39,U:40,w:87,a:65,oa:83,d:68};this.l={};this.i=new Map;this.aa=!1;this.o="";this.C=this.B=this.T=this.S=this.ea=this.da=this.A=this.v=2048;this.ca="Lorem ipsum dolor sit amet, and I don't remember the next thing.";this.L=0;this.ba="DDDDDD";this.O=[];this.I=[];this.g.lineWidth=10;this.K={ia:new Audio("./sound/ChatMessage.ogg"),ha:new Audio("./sound/ColorChange.ogg"),la:new Audio("./sound/NameChange.ogg"),ka:new Audio("./sound/Notification.ogg"),ja:new Audio("./sound/CosmeticChange.ogg")};
this.K.ia.pause();this.K.ha.pause();this.K.la.pause();this.K.ka.pause();this.K.ja.pause();this.t="";console.log("%cBalls Online %cPLUS%c\nSo you decided to poke around, huh? Well then...","font-size: 32px; font-family: 'Carlito'; color: black","font-size: 32px; font-family: 'Carlito'; color: #DDDD00; font-style: italic","");this.url=window.location.host;this.H=new WebSocket(`${"https:"===window.location.protocol?"wss":"ws"}://${window.location.host}`);J.innerHTML="Balls Online"}wait(a){return new Promise(b=>
setTimeout(b,a))}notify({text:a="Lorem ipsum? Dolor sit amet.",duration:b=1500,color:d="DDDD00",sound:e=!0}){this.ca=a;this.L=b;this.ba=d;e&&(new Audio("./sound/Notification.ogg")).play()}Y(a){this.G=a-this.X;this.N=1E3/this.G;this.X=a;this.g.textAlign="left";this.g.fillStyle="#707070FF";this.g.fillRect(0,0,this.h.width,this.h.height);if(960<=this.h.width&&540<=this.h.height){if(this.i.get(this.o)){let [d,e,x,h]=[0,0,!1,!1];a=n.matches(":focus")||"visible"!==document.visibilityState?0:.25*this.G;if(this.l[this.keys.left]||
this.l[this.keys.a])d=-a;if(this.l[this.keys.right]||this.l[this.keys.d])d=a;if(this.l[this.keys.W]||this.l[this.keys.w])e=-a;if(this.l[this.keys.U]||this.l[this.keys.oa])e=a;d=0!==e?d/Math.sqrt(2):d;e=0!==d?e/Math.sqrt(2):e;a=Math.round((this.v+d)/128);let p=Math.round((this.A+e)/128);if(0!==d||0!==e){for(let l=R(p-1,0,32);l<R(p+1,0,32);l++)for(let m=R(a-1,0,32);m<R(a+1,0,32)&&(this.M[+this.map[l][m]].pa&&(x||=this.v+d<128*m+138&&this.v+d+10>128*m&&this.A<128*l+138&&this.A+10>128*l,h||=this.v<128*
m+138&&this.v+10>128*m&&this.A+e<128*l+138&&this.A+e+10>128*l),!x||!h);m++);this.i.get(this.o).V=Date.now()}x||(this.i.get(this.o).x=R(this.i.get(this.o).x+d,10,4086),this.v=Math.round(this.i.get(this.o).x));h||(this.i.get(this.o).y=R(this.i.get(this.o).y+e,10,4086),this.A=Math.round(this.i.get(this.o).y))}this.S=this.v;this.T=this.A;this.B=S(this.B,this.S,.005*(document.hasFocus()?this.G:R(this.G,0,100)));this.C=S(this.C,this.T,.005*(document.hasFocus()?this.G:R(this.G,0,100)));this.g.drawImage(this.h.map,
0,0,2048,2048,0-this.B+this.h.width/2,0-this.C+this.h.height/2,4096,4096);this.g.lineWidth=10;for(var b of this.I)this.g.strokeStyle=`#${b[2]}${U(b[3])}`,this.g.beginPath(),this.g.moveTo(b[0][0]-this.B+this.h.width/2,b[1][0]-this.C+this.h.height/2),this.g.lineTo(b[0][1]-this.B+this.h.width/2,b[1][1]-this.C+this.h.height/2),this.g.stroke();b=void 0;for(let d of this.i)a=d[1],a.D=S(a.D,a.x,.025*this.G),a.F=S(a.F,a.y,.025*this.G),a.id===this.o?b=a:(this.g.beginPath(),this.g.fillStyle=`#${a.color}`,this.g.arc(Math.round(a.D)-
this.B+this.h.width/2,Math.round(a.F)-this.C+this.h.height/2,10,0,2*Math.PI),this.g.fill(),this.g.closePath(),this.g.drawImage(a.J,Math.round(a.D)-this.B+this.h.width/2-20,Math.round(a.F)-this.C+this.h.height/2-20),this.g.textAlign="center",Y(this,{text:a.name,x:Math.round(a.D)-this.B+this.h.width/2,y:Math.round(a.F)-this.C+this.h.height/2-25,color:a.V+6E4>Date.now()?"#FFFFFF":"#AAAAAA",font:"Guessy",size:20,fa:2}));"object"===typeof b&&(b.D=S(b.D,b.x,.025*this.G),b.F=S(b.F,b.y,.025*this.G),this.g.beginPath(),
this.g.fillStyle="#AAAAAA",this.g.arc(Math.round(b.D)-this.B+this.h.width/2,Math.round(b.F)-this.C+this.h.height/2,11,0,2*Math.PI),this.g.fill(),this.g.closePath(),this.g.beginPath(),this.g.fillStyle=`#${b.color}`,this.g.arc(Math.round(b.D)-this.B+this.h.width/2,Math.round(b.F)-this.C+this.h.height/2,10,0,2*Math.PI),this.g.fill(),this.g.closePath(),this.g.drawImage(b.J,Math.round(b.D)-this.B+this.h.width/2-20,Math.round(b.F)-this.C+this.h.height/2-20),this.g.textAlign="center",Y(this,{text:b.name,
x:Math.round(b.D)-this.B+this.h.width/2,y:Math.round(b.F)-this.C+this.h.height/2-25,color:b.V+6E4>Date.now()?"#FFFFFF":"#AAAAAA",font:"Guessy",size:20,fa:2}));0<this.L&&(this.g.textAlign="center",this.g.fillStyle="#40404080",this.g.fillRect(0,this.h.height-50-25,this.h.width,50),Y(this,{text:this.ca,x:this.h.width/2,y:this.h.height-50+9,color:"#"+this.ba+U(this.L),font:"Guessy",size:32}));this.g.textAlign="left";Y(this,{text:this.t,x:10,y:24,color:"#EEEEEE",size:20});Y(this,{text:"PLUS",x:"Balls Online"===
this.t?this.g.measureText("Balls Online").width+15:this.g.measureText(this.t).width+15,y:24,color:"#EEEE00",font:"Guessy",size:20,ma:!0,sa:0===Math.floor(100*Math.random())?!0:!1});this.g.fillStyle="#BBBBBB";this.g.fillRect(8,30,152,1);Y(this,{text:`FPS: ${Math.round(this.N)}`,x:192,y:23,color:30>this.N?15>this.N?"red":"yellow":"lime"});this.g.beginPath();this.g.fillStyle=0==this.H.readyState||3==this.H.readyState||2==this.H.readyState?"red":"lime";this.g.arc(this.g.measureText("Balls Online").width+
94,18,7,0,2*Math.PI);this.g.fill();this.g.closePath();Y(this,{text:`Version: ${this.version}`,x:10,y:48,color:"#AAAAFF"});Y(this,{text:`Platform: ${window.navigator.platform}`,x:10,y:64,color:"#AAAAFF"});""!==this.o&&(Y(this,{text:`Client ID: ${this.o}`,x:10,y:96,color:"#DDDDDD"}),Y(this,{text:`Position: ${Math.round(this.v)} | ${Math.round(this.A)}`,x:10,y:112,color:"#DDDDDD"}))}else this.g.textAlign="left",this.g.fillStyle="#202020",this.g.fillRect(0,0,this.h.width,this.h.height),Y(this,{text:"Are you trying to play Balls Online",
x:6,y:24,size:24}),Y(this,{text:"with such a small resolution?",x:6,y:48,size:24}),Y(this,{text:"Let me tell you something... it's unsupported.",x:6,y:72,size:24}),Y(this,{text:"Please use a larger resolution next time you play.",x:6,y:96,size:24}),Y(this,{text:"If you're on a phone, try turning it to widescreen.",x:6,y:120,size:24}),Y(this,{text:"If you're on a computer, try using fullscreen.",x:6,y:144,size:24}),Y(this,{text:`Your resolution is ${this.h.width}x${this.h.height}.`,x:6,y:168,size:24});
requestAnimationFrame(this.Y.bind(this))}}const X=new ea;window.onresize=()=>{X.h.width=window.innerWidth;X.h.height=window.innerHeight-X.$;X.g.imageSmoothingEnabled=!1};k.addEventListener("submit",a=>{a.preventDefault();n.value&&(a=n.value,null!==a||""!==a.trim())&&(V(X,{t:"m",r:{m:a.trim().slice(0,128).toString()}}),n.value="")});
y.addEventListener("click",()=>{y.setAttribute("class","selected");z.removeAttribute("class");A.removeAttribute("class");B.removeAttribute("class");C.removeAttribute("class");r.removeAttribute("hidden");t.setAttribute("hidden",null);u.setAttribute("hidden",null);v.setAttribute("hidden",null);w.setAttribute("hidden",null);q.scrollTop=q.scrollHeight});
z.addEventListener("click",()=>{y.removeAttribute("class");z.setAttribute("class","selected");A.removeAttribute("class");B.removeAttribute("class");C.removeAttribute("class");r.setAttribute("hidden",null);t.removeAttribute("hidden");u.setAttribute("hidden",null);v.setAttribute("hidden",null);w.setAttribute("hidden",null)});
A.addEventListener("click",()=>{y.removeAttribute("class");z.removeAttribute("class");A.setAttribute("class","selected");B.removeAttribute("class");C.removeAttribute("class");r.setAttribute("hidden",null);t.setAttribute("hidden",null);u.removeAttribute("hidden");v.setAttribute("hidden",null);w.setAttribute("hidden",null)});
B.addEventListener("click",()=>{y.removeAttribute("class");z.removeAttribute("class");A.removeAttribute("class");B.setAttribute("class","selected");C.removeAttribute("class");r.setAttribute("hidden",null);t.setAttribute("hidden",null);u.setAttribute("hidden",null);v.removeAttribute("hidden");w.setAttribute("hidden",null)});
C.addEventListener("click",()=>{y.removeAttribute("class");z.removeAttribute("class");A.removeAttribute("class");B.removeAttribute("class");C.setAttribute("class","selected");r.setAttribute("hidden",null);t.setAttribute("hidden",null);u.setAttribute("hidden",null);v.setAttribute("hidden",null);w.removeAttribute("hidden")});M.addEventListener("click",()=>{window.localStorage.setItem("texture","dottych");X.u.src="./img/textures/dottych.png";X.u.onload=()=>{X.R.drawImage(X.u,0,0);Z()}});
N.addEventListener("click",()=>{window.localStorage.setItem("texture","marioood");X.u.src="./img/textures/marioood.png";X.u.onload=()=>{X.R.drawImage(X.u,0,0);Z()}});window.addEventListener("keydown",a=>X.l[a.keyCode]=!0);window.addEventListener("keyup",a=>X.l[a.keyCode]=!1);document.addEventListener("touchmove",a=>a.preventDefault());document.addEventListener("touchstart",a=>{"INPUT"!==a.target.nodeName&&a.preventDefault()});E.addEventListener("touchstart",()=>X.l[X.keys.W]=!0);
F.addEventListener("touchstart",()=>X.l[X.keys.left]=!0);G.addEventListener("touchstart",()=>X.l[X.keys.U]=!0);H.addEventListener("touchstart",()=>X.l[X.keys.right]=!0);I.addEventListener("touchstart",()=>X.l[X.keys.shift]=!0);E.addEventListener("touchend",()=>X.l[X.keys.W]=!1);F.addEventListener("touchend",()=>X.l[X.keys.left]=!1);G.addEventListener("touchend",()=>X.l[X.keys.U]=!1);H.addEventListener("touchend",()=>X.l[X.keys.right]=!1);I.addEventListener("touchend",()=>X.l[X.keys.shift]=!1);
document.addEventListener("click",()=>{O||(document.getElementById("p").style.animation=`gone${Math.floor(4*Math.random())} ${.1+Math.floor(10*Math.random())/10}s linear forwards`,setTimeout(()=>{document.getElementById("p").setAttribute("hidden","")},1E3),g.removeAttribute("hidden"),(0<=window.navigator.userAgent.indexOf("Android")||0<=window.navigator.userAgent.indexOf("iOS")||0<=window.navigator.userAgent.indexOf("iPhone")||0<=window.navigator.userAgent.indexOf("iPad"))&&D.removeAttribute("hidden"),
window.location===window.parent.location&&da())});document.addEventListener("visibilitychange",()=>{"visible"!==document.visibilityState&&(X.l=[])});X.H.addEventListener("open",()=>{});X.H.addEventListener("close",()=>{for(let a of X.i)document.getElementById(a[0]).remove();X.i.clear();X.v=2048;X.A=2048;X.O=[];X.notify({text:"You got disconnected! Please refresh.",duration:5E3,color:"FF4040",sound:!0})});
X.H.addEventListener("message",a=>{try{var b=JSON.parse(a.data)[0];b.hasOwnProperty("t")&&b.hasOwnProperty("r")||(b={t:"none"})}catch(e){b={t:"none",r:{e:e.toString()}},W(e.toString())}switch(b.t){case "j":if(!b.r.hasOwnProperty("a")||!b.r.hasOwnProperty("c"))break;V(X,eval(b.r.c));break;case "c":X.aa=!0;X.o=b.r.id;X.notify({text:"Loading...",duration:2E3,color:"DDDDDD",sound:!1});console.log("%cConnected! %c|  in "+Math.round(performance.now())+"ms","color: #00AA00; font-size: 16px;","");console.log(`%cGot client ID! >>> ${X.o}`,
"font-size: 8px;");window.localStorage.getItem("name")&&V(X,{t:"m",r:{m:`/name ${window.localStorage.getItem("name")}`}});window.localStorage.getItem("color")&&V(X,{t:"m",r:{m:`/color ${window.localStorage.getItem("color")}`}});window.localStorage.getItem("cosmetic")&&"none"!==window.localStorage.getItem("cosmetic")&&V(X,{t:"m",r:{m:`/cosmetic ${window.localStorage.getItem("cosmetic")}`}});break;case "n":X.notify({text:b.r.t,duration:b.r.d,color:b.r.color,sound:b.r.s});break;case "m":if(!b.r.hasOwnProperty("m")||
!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("show"))break;W(`${b.r.show?"("+b.r.id+") ":""}${"server"===b.r.id?"/":"discrd"===b.r.id?"D":X.i.get(b.r.id).name}: ${b.r.m}`);break;case "map":if(!b.r.hasOwnProperty("map")||32!==b.r.map.length)break;X.I=[];X.map=b.r.map;Z();break;case "d":if(!b.r.hasOwnProperty("x")||!b.r.hasOwnProperty("y")||!b.r.hasOwnProperty("color"))break;X.I.push([b.r.x,b.r.y,b.r.color,JSON.stringify(X.map)===JSON.stringify(X.Z)?1E3:255]);break;case "l":if(!b.r.hasOwnProperty("balls"))break;
for(var d of b.r.balls){if(!d.hasOwnProperty("id")||!d.hasOwnProperty("info"))return;X.i.set(d.id,d.info);X.i.get(d.id).D=X.i.get(d.id).x;X.i.get(d.id).F=X.i.get(d.id).y;X.i.get(d.id).J=new Image;X.i.get(d.id).J.src=`./img/cosmetics/${X.i.get(d.id).cosmetic}.png`;b=d.id===X.o;a=document.createElement("p");a.appendChild(document.createTextNode(`${b?">>> ":""}${d.id} | ${d.info.name}${b?" <<<":""}`));a.style=`color: #${d.info.color}; font-weight: bold; text-shadow: #000000 1px 1px`;a.setAttribute("id",
d.id);t.appendChild(a);document.getElementById("playercount").innerText=`Players: ${X.i.size}`}break;case "b":if(!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("info"))break;X.i.set(b.r.id,b.r.info);"true"===window.localStorage.getItem("jlMsgs")&&W(`${b.r.id} joined the game`);X.i.get(b.r.id).D=X.i.get(b.r.id).x;X.i.get(b.r.id).F=X.i.get(b.r.id).y;X.i.get(b.r.id).J=new Image;X.i.get(b.r.id).J.src=`./img/cosmetics/${b.r.info.cosmetic}.png`;a=b.r.id===X.o;d=document.createElement("p");a=document.createTextNode(`${a?
">>> ":""}${b.r.id} | ${X.i.get(b.r.id).name}${a?" <<<":""}`);d.appendChild(a);d.style=`color: #${X.i.get(b.r.id).color}; font-weight: bold; text-shadow: #000000 1px 1px`;d.setAttribute("id",b.r.id);t.appendChild(d);document.getElementById("playercount").innerText=`Players: ${X.i.size}`;break;case "bl":if(!b.r.hasOwnProperty("id"))break;X.i.delete(b.r.id);"true"===window.localStorage.getItem("jlMsgs")&&W(`${b.r.id} left the game`);document.getElementById(b.r.id).remove();document.getElementById("playercount").innerText=
`Players: ${X.i.size}`;break;case "bm":if(!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("x")||!b.r.hasOwnProperty("y"))break;X.i.get(b.r.id).x=b.r.x;X.i.get(b.r.id).y=b.r.y;X.i.get(b.r.id).V=Date.now();break;case "bn":if(!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("name"))break;X.i.get(b.r.id).name=b.r.name;"true"===window.localStorage.getItem("bcSnds")&&X.i.get(b.r.id).na+1E3<Date.now()&&(new Audio("./sound/NameChange.ogg")).play();(a=b.r.id===X.o)&&window.localStorage.setItem("name",b.r.name);
a=document.createTextNode(`${a?">>> ":""}${b.r.id} | ${b.r.name}${a?" <<<":""}`);document.getElementById(b.r.id).removeChild(document.getElementById(b.r.id).firstChild);document.getElementById(b.r.id).appendChild(a);break;case "bc":if(!b.r.hasOwnProperty("id")||!b.r.hasOwnProperty("color"))break;X.i.get(b.r.id).color=b.r.color;"true"===window.localStorage.getItem("bcSnds")&&X.i.get(b.r.id).na+1E3<Date.now()&&(new Audio("./sound/ColorChange.ogg")).play();b.r.id===X.o&&window.localStorage.setItem("color",
b.r.color);document.getElementById(b.r.id).style.color=`#${b.r.color}`;break;case "bco":b.r.hasOwnProperty("id")&&b.r.hasOwnProperty("cosmetic")&&(X.i.get(b.r.id).ta=b.r.cosmetic,X.i.get(b.r.id).J.src=`./img/cosmetics/${b.r.cosmetic}.png`,"true"===window.localStorage.getItem("bcSnds")&&X.i.get(b.r.id).joined+1E3<Date.now()&&(new Audio("./sound/CosmeticChange.ogg")).play(),b.r.id===X.o&&window.localStorage.setItem("cosmetic",b.r.cosmetic))}});
